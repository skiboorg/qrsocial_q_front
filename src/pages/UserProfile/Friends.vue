<template>
  <div class="subscribe backblock">
			<div class="h1">My subscription</div>
			<div v-if="$auth.user.own_friend_list[0].friend_list.length > 0" class="subblock">
				<div class="sub q-px-md"
             v-for="friend in $auth.user.own_friend_list[0].friend_list"
                    :key="friend.id">
					<div class="sub-l">
            <q-avatar @click="$router.push({name:'girl-profile-main',params:{nickname:friend.nickname}})" class="q-mr-sm cursor-pointer">
              	<img  :src="friend.avatar" alt="avatar">
            </q-avatar>

						<div class="info">
							<div class="name text-bold">{{friend.fio}}</div>
							<div @click="$router.push({name:'girl-profile-main',params:{nickname:friend.nickname}})" class="name cursor-pointer">@{{friend.nickname}}</div>

						</div>
					</div>
					<div class="sub-r">
						<div class="write cursor-pointer" @click="$router.push({name:'user-profile-chat',params:{nickname:friend.nickname}})">
							<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M8.99988 6.29991C8.82187 6.29991 8.64787 6.3527 8.49987 6.45159C8.35187 6.55048 8.23651 6.69104 8.1684 6.85549C8.10028 7.01994 8.08245 7.2009 8.11718 7.37548C8.15191 7.55006 8.23762 7.71042 8.36349 7.83629C8.48935 7.96215 8.64972 8.04787 8.8243 8.08259C8.99888 8.11732 9.17983 8.0995 9.34429 8.03138C9.50874 7.96326 9.6493 7.84791 9.74819 7.69991C9.84708 7.5519 9.89986 7.3779 9.89986 7.1999C9.89986 6.96121 9.80504 6.73229 9.63626 6.56351C9.46748 6.39473 9.23857 6.29991 8.99988 6.29991ZM15.2998 0H2.69996C1.98389 0 1.29714 0.28446 0.790801 0.790801C0.28446 1.29714 0 1.98389 0 2.69996V11.6998C0 12.4159 0.28446 13.1027 0.790801 13.609C1.29714 14.1153 1.98389 14.3998 2.69996 14.3998H13.1308L16.4608 17.7388C16.5449 17.8222 16.6446 17.8882 16.7543 17.9329C16.8639 17.9777 16.9813 18.0004 17.0998 17.9997C17.2178 18.0028 17.3349 17.9781 17.4418 17.9277C17.6061 17.8602 17.7468 17.7456 17.8461 17.5982C17.9454 17.4509 17.9989 17.2774 17.9998 17.0998V2.69996C17.9998 1.98389 17.7153 1.29714 17.209 0.790801C16.7026 0.28446 16.0159 0 15.2998 0ZM16.1998 14.9308L14.1388 12.8608C14.0547 12.7774 13.955 12.7114 13.8453 12.6666C13.7357 12.6218 13.6183 12.5991 13.4998 12.5998H2.69996C2.46127 12.5998 2.23236 12.505 2.06358 12.3362C1.8948 12.1674 1.79998 11.9385 1.79998 11.6998V2.69996C1.79998 2.46127 1.8948 2.23236 2.06358 2.06358C2.23236 1.89479 2.46127 1.79997 2.69996 1.79997H15.2998C15.5385 1.79997 15.7674 1.89479 15.9362 2.06358C16.105 2.23236 16.1998 2.46127 16.1998 2.69996V14.9308ZM5.39993 6.29991C5.22192 6.29991 5.04792 6.3527 4.89992 6.45159C4.75192 6.55048 4.63656 6.69104 4.56845 6.85549C4.50033 7.01994 4.4825 7.2009 4.51723 7.37548C4.55196 7.55006 4.63767 7.71042 4.76354 7.83629C4.8894 7.96215 5.04977 8.04787 5.22435 8.08259C5.39893 8.11732 5.57988 8.0995 5.74434 8.03138C5.90879 7.96326 6.04935 7.84791 6.14824 7.69991C6.24713 7.5519 6.29991 7.3779 6.29991 7.1999C6.29991 6.96121 6.20509 6.73229 6.03631 6.56351C5.86753 6.39473 5.63862 6.29991 5.39993 6.29991ZM12.5998 6.29991C12.4218 6.29991 12.2478 6.3527 12.0998 6.45159C11.9518 6.55048 11.8365 6.69104 11.7683 6.85549C11.7002 7.01994 11.6824 7.2009 11.7171 7.37548C11.7519 7.55006 11.8376 7.71042 11.9634 7.83629C12.0893 7.96215 12.2497 8.04787 12.4242 8.08259C12.5988 8.11732 12.7798 8.0995 12.9442 8.03138C13.1087 7.96326 13.2492 7.84791 13.3481 7.69991C13.447 7.5519 13.4998 7.3779 13.4998 7.1999C13.4998 6.96121 13.405 6.73229 13.2362 6.56351C13.0674 6.39473 12.8385 6.29991 12.5998 6.29991Z" fill="#A7ACB3"></path>
							</svg>
							<div>Leader board</div>
						</div>
						<div class="present cursor-pointer" @click="setGiftModal(true)">
							<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M16.6154 4.79473H13.5894C14.04 4.2122 14.2619 3.46838 14.2093 2.71725C14.1567 1.96611 13.8335 1.26518 13.3067 0.759541C12.7799 0.253903 12.0898 -0.0177206 11.3792 0.000897596C10.6686 0.0195158 9.99205 0.32695 9.48946 0.859561C9.28902 1.08094 9.12373 1.33526 9 1.61263C8.87622 1.33527 8.7109 1.08096 8.51045 0.859561C8.00783 0.327164 7.33128 0.019915 6.62083 0.00139574C5.91037 -0.0171235 5.22039 0.254505 4.69367 0.760069C4.16695 1.26563 3.84381 1.96643 3.79112 2.71744C3.73843 3.46846 3.96023 4.21219 4.41061 4.79473H1.38462C1.01752 4.79517 0.665576 4.94989 0.406 5.22496C0.146423 5.50003 0.000412288 5.87298 0 6.26198V9.19649C0.000412288 9.58549 0.146423 9.95844 0.406 10.2335C0.665576 10.5086 1.01752 10.6633 1.38462 10.6637V16.5327C1.38503 16.9218 1.53104 17.2947 1.79062 17.5698C2.05019 17.8448 2.40213 17.9996 2.76923 18H15.2308C15.5979 17.9996 15.9498 17.8448 16.2094 17.5698C16.469 17.2947 16.615 16.9218 16.6154 16.5327V10.6637C16.9825 10.6633 17.3344 10.5086 17.594 10.2335C17.8536 9.95844 17.9996 9.58549 18 9.19649V6.26198C17.9996 5.87298 17.8536 5.50003 17.594 5.22496C17.3344 4.94989 16.9825 4.79517 16.6154 4.79473ZM10.4686 1.89709C10.7282 1.62192 11.0804 1.46733 11.4477 1.46733C11.8149 1.46733 12.1671 1.62192 12.4268 1.89709C12.6864 2.17226 12.8323 2.54547 12.8323 2.93462C12.8323 3.32377 12.6864 3.69698 12.4268 3.97215C11.9993 4.42517 10.763 4.67964 9.72182 4.76346C9.80091 3.66009 10.041 2.3502 10.4686 1.89709ZM5.57316 1.89709C5.83306 1.62236 6.18516 1.46807 6.55226 1.46807C6.91935 1.46807 7.27146 1.62236 7.53136 1.89709C7.95903 2.3502 8.19909 3.66018 8.27818 4.76346C7.23695 4.67964 6.00084 4.42517 5.57325 3.97206C5.31402 3.69666 5.16844 3.32356 5.16844 2.93458C5.16844 2.54559 5.31402 2.17249 5.57325 1.89709H5.57316ZM1.38462 6.26198H8.30769V9.19649H1.38462V6.26198ZM2.76923 10.6637H8.30769V16.5327H2.76923V10.6637ZM15.2308 16.5327H9.69231V10.6637H15.2308V16.5327ZM16.6154 9.19649H9.69231V6.26198H16.6154L16.6162 9.19649H16.6154Z" fill="#A7ACB3"></path>
							</svg>
              <div>Leader board</div>
						</div>
						<svg class="close cursor-pointer" @click="friendAction(friend.nickname)" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
						<circle cx="12" cy="12" r="12" fill="#E2E2E2"></circle>
						<path d="M6.48914 17.5109C5.83695 16.8587 5.83695 15.8013 6.48914 15.1491L15.1491 6.48914C15.8013 5.83695 16.8587 5.83695 17.5109 6.48914C18.163 7.14134 18.163 8.19875 17.5109 8.85094L8.85094 17.5109C8.19875 18.163 7.14134 18.163 6.48914 17.5109Z" fill="white"></path>
						<path d="M17.5109 17.5109C16.8587 18.163 15.8013 18.163 15.1491 17.5109L6.48914 8.85094C5.83695 8.19875 5.83695 7.14134 6.48914 6.48914C7.14134 5.83695 8.19875 5.83695 8.85094 6.48914L17.5109 15.1491C18.163 15.8013 18.163 16.8587 17.5109 17.5109Z" fill="white"></path>
						</svg>
					</div>
				</div>

			</div>
		</div>
 <GiftModal/>
</template>

<script>

import {mapGetters, mapActions} from 'vuex'
import {Notify} from "quasar";
import GiftModal from "components/GiftModal";
export default {
components:{GiftModal},
  data () {
    return {

    }
  },
  methods:{
    ...mapActions('auth',['getUser']),
    ...mapActions('data',['setGiftModal']),
    async sendBlankChatMessage(nickname){
      await this.$api.post('/api/v1/chat/new_message',{nickname:nickname,message:'hello'})
      console.log('message send')
      //this.$auth.user.is_streamer ?  this.$router.push( `/streamer/chats#${nickname}`) : this.$router.push( `/lk/chats#${nickname}`)
    },
    async friendAction(nickname){
      let checkFriendList = this.$auth.user.own_friend_list[0].friend_list.filter(x => x.nickname === nickname)
      console.log(checkFriendList)
      if (checkFriendList.length > 0){
        await this.$api.post('/api/v1/friend/add_or_delete_friend_by_nickname',{nickname:nickname,action:'delete'})
        Notify.create(
            {
              message: '该用户已从您的书签中删除',
              position:'top-right',
              color: 'red'
            }
          )
      }else {
        await this.$api.post('/api/v1/friend/add_or_delete_friend_by_nickname',{nickname:nickname,action:'add'})
        Notify.create(
            {
              message: '书签中的用户',
              position:'top-right',
              color: 'positive'
            }
          )
      }
      await this.getUser()
    }
  },

}
</script>
 <style lang="sass">

 </style>
